## 有没有了解过Redis？

##### 1 用Redis实现缓存：将热门数据和热门页面存到Redis进行缓存，比如热门商品信息，商品页面和网站首页。

##### 2 缓存遇到的问题：缓存穿透、缓存雪崩、缓存击穿。

##### 3 Redis的进阶功能：Redis有各种数据结构，除了缓存之外，还能实现很多功能。比如：消息队列、附近的人、排行榜等等。

##### 4 Redis持久化：Redis可以将缓存持久化到本地，持久化策略包括RDB和AOF。

##### 5 集群：如果单机Redis不够用的话，可以考虑搭建Redis集群，Redis集群有主从和哨兵两种模式。



### 什么是Redis，Redis有哪些特点？

Redis全称为：Remote Dictionary Server（远程数据服务），Redis是一种支持key-value等多种数据结构的存储系统。可用于缓存，事件发布或订阅，高速队列等场景。支持网络，提供字符串，哈希，列表，队列，集合结构直接存取，基于内存，可持久化。

**特点1：丰富的数据类型** Redis的值不仅可以是字符串，它还可以是其他五中数据机构中的任意一种

**特点2：内存存储**内存存储是讲所有的数据都存储在内存里面，数据读取和写入速度非常快。

**特点3：持久化功能**将数据存储在内存里面的数据保存到硬盘中，保证数据安全，方便进行数据备份和恢复。



# Redis有哪些数据结构？

Redis是key-value数据库，key的类型只能是String，但是value的数据类型就比较丰富了，主要包括五种：

- String
- Hash
- List
- Set
- Sorted Set

# 一个字符串类型的值能存储最大容量是多少？

String类型的value值最多支持的长度为512M，所以正确的答案是512M。



# 能说一下Redis每种数据结构的使用场景吗？

**（1）String的使用场景**

字符串类型的使用场景：信息缓存、计数器、分布式锁等等。

常用命令：get/set/del/incr/decr/incrby/decrby

**实战场景1：记录每一个用户的访问次数，或者记录每一个商品的浏览次数**

方案：

常用键名： userid:pageview 或者 pageview:userid，如果一个用户的id为123，那对应的redis key就为pageview:123，value就为用户的访问次数，增加次数可以使用命令：incr。

使用理由：每一个用户访问次数或者商品浏览次数的修改是很频繁的，如果使用mysql这种文件系统频繁修改会造成mysql压力，效率也低。而使用redis的好处有二：使用内存，很快；单线程，所以无竞争，数据不会被改乱。

**实战场景2：缓存频繁读取，但是不常修改的信息，如用户信息，视频信息**

方案：

业务逻辑上：先从redis读取，有值就从redis读取，没有则从mysql读取，并写一份到redis中作为缓存，注意要设置过期时间。

键值设计上：

直接将用户一条mysql记录做序列化(通常序列化为json)作为值，userInfo:userid 作为key，键名如：userInfo:123，value存储对应用户信息的json串。如 key为："user:id :name:1", value为"{"name":"leijia","age":18}"。



**实战场景3：限定某个ip特定时间内的访问次数**

方案：

用key记录IP，value记录访问次数，同时key的过期时间设置为60秒，如果key过期了则重新设置，否则进行判断，当一分钟内访问超过100次，则禁止访问。




